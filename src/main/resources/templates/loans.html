<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Commerce Bank</title>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" href="css/loans.css">
    <link rel="stylesheet" type="text/css" href="css/ai-chat.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body style="margin: 0;">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">
        <img id="logo" src="images/CommerceBankLogo.png" alt="Logo" width="165" height="40" class="d-inline-block align-text-top">
    </a>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" th:href="@{/dashboard}">Summary</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" th:href="@{/transfer}">Transfer</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" style="text-decoration: underline; font-weight: bold;">Loans</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" th:href="@{/profile}">Profile</a>
            </li>
        </ul>
    </div>
    <form th:action="@{/logout}" method="get">
        <button class="btn btn-outline-success mx-3 my-0" type="submit">Logout</button>
    </form>
</nav>
<div class="loanPage" id="loanPage" style="flex:1">
    <div class="container">
        <div class="card-inline">
            <h2>Credit Card</h2>
            <button id="ccbtn" onclick="showccdiv('cccard')" class="btn btn-success">Learn more!</button>
        </div>
        <div class="card-inline">
            <h2>Auto Loan</h2>
            <button id="albtn" onclick="showccdiv('alcard')" class="btn btn-success">Learn more!</button>
        </div>
        <div class="card-inline">
            <h2>Home Loan</h2>
            <button id="hlbtn" onclick="showccdiv('hlcard')" class="btn btn-success">Learn more!</button>
        </div>
        <div class="card-inline">
            <h2>Personal Loan</h2>
            <button id="plbtn" onclick="showccdiv('plcard')" class="btn btn-success">Learn more!</button>
        </div>
    </div>
    <div id="cardsHolder" style="height: 600px">
        <div class="card" id="cccard">
            <div class="card-body">
                <span class="card-text text-center" style="font-style: italic; font-weight: bold; color: rgba(0,0,0,0); display:block">*** Your application is received. Our associate will contact you very soon!! *** </span>
                <img src="images/loans/creditcard.svg" class="card-img-top mx-auto d-block image" alt="Credit Card Image">
                <h5 class="card-title text-center">Credit Card</h5>
                <ul class="list-unstyled text-center">
                    <li>5% cash back every where</li>
                    <li>0% Intro APR for 5 years</li>
                    <li>Unlimited Cashback Match</li>
                    <li>$500 sign in bonus</li>
                </ul>
                <p class="card-text text-center">Credit cards offer convenience and flexibility for payments, both online
                    and
                    in-store. They enable users to build a positive credit history, providing opportunities for future
                    financial
                    endeavors. Additionally, credit cards often come with rewards, perks, and enhanced security features,
                    making
                    them a valuable tool for responsible financial management.</p>
                <button class="btn btn-success" style="width: 100%;" data-toggle="modal" data-target="#myModal">Apply
                    now >></button>
            </div>

        </div>
        <div class="card" id="alcard">
            <div class="card-body">
                <span class="card-text text-center" style="font-style: italic; font-weight: bold; color: rgba(0,0,0,0); display:block">*** Your application is received. Our associate will contact you very soon!! *** </span>
                <img src="images/loans/autoloan.svg" class="card-img-top mx-auto d-block image" alt="Auto Loan Image">
                <h5 class="card-title text-center">Auto Loan</h5>
                <ul class="list-unstyled text-center">
                    <li>Get qualified offers in minutes</li>
                    <li>Loan up to $300k</li>
                    <li>No proof of income needed</li>
                    <li>No minimum credit score</li>
                </ul>
                <p class="card-text text-center">Auto loans provide an avenue for acquiring a vehicle without the need for a
                    lump-sum
                    payment, making transportation accessible. They enable individuals to build credit as they make timely
                    payments, fostering financial responsibility. Additionally, auto loans can offer competitive interest
                    rates and flexible repayment terms, enhancing affordability for borrowers.</p>
                <button class="btn btn-success" style="width: 100%;" data-toggle="modal" data-target="#myModal">Apply
                    now >></button>
            </div>
        </div>
        <div class="card" id="hlcard">
            <div class="card-body">
                <span class="card-text text-center" style="font-style: italic; font-weight: bold; color: rgba(0,0,0,0); display:block">*** Your application is received. Our associate will contact you very soon!! *** </span>
                <img src="images/loans/homeloan.svg" class="card-img-top mx-auto d-block image" alt="Home Loan Image">
                <h5 class="card-title text-center">Home Loan</h5>
                <ul class="list-unstyled text-center">
                    <li>Competitively low rate and no PMI</li>
                    <li>Rate protection</li>
                    <li>Home buying with as little as 1% down</li>
                    <li>Special benefits for veterans</li>
                </ul>
                <p class="card-text text-center">Home loans provide a pathway to home ownership by enabling individuals to
                    finance
                    their home purchase. They offer long-term financial stability, potential tax benefits, and an
                    opportunity to
                    build equity. Additionally, home loans often come with competitive interest rates, making home ownership
                    more
                    accessible and affordable.</p>
                <button class="btn btn-success" style="width: 100%;" data-toggle="modal" data-target="#myModal">Apply
                    now >></button>
            </div>
        </div>
        <div class="card" id="plcard">
            <div class="card-body">
                <span class="card-text text-center" style="font-style: italic; font-weight: bold; color: rgba(0,0,0,0); display:block">*** Your application is received. Our associate will contact you very soon!! *** </span>
                <img src="images/loans/personalloan.svg" class="card-img-top mx-auto d-block image" alt="Personal Loan Image">
                <h5 class="card-title text-center">Personal Loan</h5>
                <ul class="list-unstyled text-center">
                    <li>Borrow up to 100k</li>
                    <li>No minimum credit score</li>
                    <li>Low APR: 3.4%-10%</li>
                    <li>Term: 12-72 months</li>
                </ul>
                <p class="card-text text-center">Personal loans offer financial flexibility for various purposes, such as debt consolidation,
                    home improvements, or unexpected expenses. They provide a fixed repayment plan, simplified
                    and potential lower interest rates compared to credit cards.
                    Personal loans empower individuals to achieve their financial goals with ease and convenience.</p>
                <button class="btn btn-success" style="width: 100%;" data-toggle="modal" data-target="#myModal">Apply
                    now >></button>
            </div>
        </div>
    </div>



    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Quick Apply</h5>
                </div>
                <div class="modal-body">
                    <!-- Selector for ratings -->
                    <div class="form-group">
                        <label for="creditSelector">How do you rate your credit score?</label>
                        <select class="form-select" id="creditSelector">
                            <option>Select</option>
                            <option>Excellent</option>
                            <option>Good</option>
                            <option>Average</option>
                        </select>
                    </div>
                    <!-- Input field for number -->
                    <div class="form-group">
                        <label for="loanAmount">How much do you plan to borrow? </label>
                        <input type="number" class="form-control" id="loanAmount" placeholder="Ex: 100000">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="modalApplyButton" data-dismiss="modal">Apply</button>
                </div>
            </div>
        </div>
    </div>
    <div class="container mb-5">
        <div id="QAButtonContainer">
            <div style="text-align: center; width: fit-content">
                <button class="btn bg-white border-success border-3" id="QAButton" onclick="toggleQAdiv()">Need help?</button><br>
                <span><b>Virtual Assistant</b></span><br>
                <span><i>Powered by OpenAI</i></span>
            </div>
        </div>
        <div id="QAdiv">
            <button class="close-button" onclick="showEndingMessage()" id="closeChatBtn">&#128473;&#xFE0E;</button>
            <button class="minimize-button" onclick="toggleQAdiv()">&#128469;&#xFE0E;</button>
            <div id="closingMessage">
                <p>End this chat?</p>
                <button class="btn btn-success" onclick="showRatingMessage()">Yes</button>
                <button class="btn btn-secondary" onclick="cancelEndChat()">No</button>
            </div>
            <div id="thankYouMessage">
                <p>Thank you for using Virtual Assistant!</p>
                <p>This chat box will be automatically closed.</p>
                <img src="images/chatbot-thinking-bg-removed.gif" alt="Loading..." width="120px" height="120px"/>
            </div>
            <div id="ratingMessage">
                <p>How would you rate your experience?</p>
                <div class="bg-success rounded-2">
                    <i class='fa fa-star-o custom-icon' onclick="rate(1)" id="star1"></i>
                    <i class='fa fa-star-o custom-icon' onclick="rate(2)" id="star2"></i>
                    <i class='fa fa-star-o custom-icon' onclick="rate(3)" id="star3"></i>
                    <i class='fa fa-star-o custom-icon' onclick="rate(4)" id="star4"></i>
                    <i class='fa fa-star-o custom-icon' onclick="rate(5)" id="star5"></i>
                </div>
                <br>
                <button class="btn btn-success" onclick="endChat()">Submit</button>
                <button class="btn btn-secondary" onclick="endChat()">Skip</button>
            </div>
            <img id="loadingGif" src="images/chatbot-thinking-bg-removed.gif" alt="Loading..." width="120px" height="120px"/>
            <div class="mb-3" id="conversationDiv">
            </div>
            <div class="row align-items-end">
                <div class="col-9">
                    <textarea class="form-control" id="question" rows="3" placeholder="Enter your question:"></textarea>
                </div>
                <div class="col-2">
                    <!--                <div class="row mb-2">-->
                    <!--                    <img src="images/open-ai-logo.png" height="40px" width="40px" alt="openailogo">-->
                    <!--                </div>-->
                    <!--                <div class="row">-->
                    <button class="btn btn-success" type="button" id="submitQuestionButton" onclick="writeAndSubmit()">Send</button>
                    <!--                </div>-->
                </div>
            </div>
        </div>
    </div>
    <!--    <div style="display: flex; justify-content: center">-->
    <!--        <img src="images/transfer/transfer-image.jpg" alt="saving account advert" style="height: 220px; width: auto" >-->
    <!--    </div>-->
</div>
<div class="bg-success mt-3">
    <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-auto px-5 border-top">
        <div class="col-md-4 d-flex align-items-center">
            <span class="mb-3 mb-md-0 text-white">© 2024 Commerce Bank, Inc</span>
        </div>

        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
            <li class="nav-item">
                <a href="/features" class="nav-link px-2 text-white"
                   onmouseover="this.style.textDecoration='underline'"
                   onmouseleave="this.style.textDecoration='none'">Pages & Functionalities</a>
            </li>
        </ul>
    </footer>
</div>

<!-- Bootstrap JS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script type="text/javascript">

    showccdiv('cccard')  // show credit card at the beginning
    var currentCardId = 'cccard';
    //initially
    function showccdiv(divid) {
        if(divid !== currentCardId){
            var cards = document.querySelectorAll('.card');
            cards.forEach(function(card) {
                if(card.id===currentCardId){
                    card.classList.add('left');   //move the current card to the left to hide. class list = ['left','show','card']
                    card.classList.remove('show'); // remove show state so that we add this class later make it show. class list = ['left','card']
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 150);
                }
                else if(card.classList.contains('left')){
                    card.classList.remove('left'); // if the card is not the current one then return it to the original position on the right. class list =['card']
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 150);
                }
            });
            var selectedCard = document.getElementById(divid);
            selectedCard.style.display = 'block';
            setTimeout(() => {
                selectedCard.classList.add('show'); //show the card. class list =['show','card']
            }, 150);
            currentCardId = divid; //update current card
        }
    }
    function apply(currentCardId){
        var currentCard = document.getElementById(currentCardId);
        var button = currentCard.querySelector("button");
        // Find the first span element within the parent div
        var messageSpan = currentCard.querySelector("span");
        button.textContent = "Thank you for applying!"
        // Set the display of the message span to "block"
        if (messageSpan) {
            messageSpan.style.color = "white"
            messageSpan.style.background = "rgb(46,139,87)"
        }
    }

    $(document).ready(function() {
        // Event listener for the Save Changes button
        $('#modalApplyButton').click(function() {
            apply(currentCardId)
        });

        // Event listener for the Close button (dismiss)
        $('#myModal').on('hidden.bs.modal', function () {
            // Clear the content of the input fields when the modal is closed
            $('#creditSelector').val('Select');
            $('#loanAmount').val('');
            // Add your custom logic here
        });
    });

    window.addEventListener('load', function() {
        document.getElementById('loanPage').style.opacity = 1
    });

</script>
<script src="js/ai-chat-functions.js"></script>
</body>
</html>